import{u as E,R as e,w as T,P as w,x as k,y as N,z as d,A as o,E as C,B as f,G as R,H as D,c as S,D as x,T as y,J as L,e as A}from"./index-ohkpUfgU.js";function I({searchResults:m,assemblyName:u,model:t,handleClose:i}){const l=E.getSession(t),{pluginManager:b}=E.getEnv(l),{assemblyManager:h}=l,g=u||t.displayedRegions[0].assemblyName,c=h.get(g);if(!c)throw new Error(`assembly ${g} not found`);if(!c.regions)throw new Error(`assembly ${g} regions not loaded`);function p(a){var n;if(a){const r=b.pluggableConfigSchemaType("track"),s=R(r,D(t),a);return((n=s==null?void 0:s.name)===null||n===void 0?void 0:n.value)||""}return""}async function v(a){var n;try{const r=(n=c==null?void 0:c.regions)===null||n===void 0?void 0:n.find(s=>a===s.refName);r?(t.setDisplayedRegions([r]),t.showAllRegions()):await t.navToLocString(a,g)}catch(r){console.warn(r),l.notify(`${r}`,"warning")}}return e.createElement(T,{component:w},e.createElement(k,null,e.createElement(N,null,e.createElement(d,null,e.createElement(o,null,"Name"),e.createElement(o,{align:"right"},"Location"),e.createElement(o,{align:"right"},"Track"),e.createElement(o,{align:"right"}))),e.createElement(C,null,m.map(a=>e.createElement(d,{key:a.getId()},e.createElement(o,{component:"th",scope:"row"},a.getLabel()),e.createElement(o,{align:"right"},a.getLocation()),e.createElement(o,{align:"right"},p(a.getTrackId())||"N/A"),e.createElement(o,{align:"right"},e.createElement(f,{onClick:async()=>{try{await v(a.getLocation()||a.getLabel());const n=a.getTrackId();n&&t.showTrack(n)}catch(n){console.error(n),l.notifyError(`${n}`,n)}i()},color:"primary",variant:"contained"},"Go")))))))}function B({model:m,assemblyName:u,searchQuery:t,searchResults:i,handleClose:l}){return e.createElement(S.Dialog,{open:!0,maxWidth:"xl",onClose:l,title:"Search results"},e.createElement(x,null,i!=null&&i.length?e.createElement(e.Fragment,null,e.createElement(y,null,"Showing results for ",e.createElement("b",null,t)),e.createElement(I,{model:m,handleClose:l,assemblyName:u,searchResults:i})):e.createElement(y,null,"No results found for ",e.createElement("b",null,t))),e.createElement(L,null),e.createElement(A,null,e.createElement(f,{onClick:()=>{l()},color:"primary"},"Cancel")))}export{B as default};
