"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["62807"],{4322:function(e,a,t){t.a(e,(async function(e,a){try{var n=t(61701),i=(t(71695),t(47021),t(57243)),s=t(50778),c=t(36522),o=(t(19993),t(74633),t(42603)),d=t(7111),l=t(26779),u=e([l]);l=(u.then?(await u)():u)[0];let h,r,g,p=e=>e;const k="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z";(0,n.Z)([(0,s.Mo)("ha-backup-config-encryption-key")],(function(e,a){return{F:class extends a{constructor(...a){super(...a),e(this)}},d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"value",value:void 0},{kind:"get",key:"_value",value:function(){var e;return null!==(e=this.value)&&void 0!==e?e:""}},{kind:"method",key:"render",value:function(){return this._value?(0,i.dy)(h||(h=p` <ha-md-list> <ha-md-list-item> <span slot="headline">Download emergency kit</span> <span slot="supporting-text"> We recommend to save this encryption key somewhere secure. </span> <ha-button slot="end" @click="${0}"> <ha-svg-icon .path="${0}" slot="icon"></ha-svg-icon> Download </ha-button> </ha-md-list-item> <ha-md-list-item> <span slot="headline">Change encryption key</span> <span slot="supporting-text"> All next backups will use this encryption key. </span> <ha-button class="danger" slot="end" @click="${0}"> Change </ha-button> </ha-md-list-item> </ha-md-list> `),this._download,k,this._change):(0,i.dy)(r||(r=p` <ha-md-list> <ha-md-list-item> <span slot="headline">Set encryption key</span> <span slot="supporting-text"> Set an encryption key for your backups. </span> <ha-button slot="end" @click="${0}"> Set </ha-button> </ha-md-list-item> </ha-md-list> `),this._set)}},{kind:"method",key:"_download",value:function(){this._value&&(0,l.VY)(this.hass,this._value)}},{kind:"method",key:"_change",value:function(){(0,o.k)(this,{currentKey:this._value,saveKey:e=>{(0,c.B)(this,"value-changed",{value:e})}})}},{kind:"method",key:"_set",value:function(){(0,d.S)(this,{saveKey:e=>{(0,c.B)(this,"value-changed",{value:e})}})}},{kind:"field",static:!0,key:"styles",value(){return(0,i.iv)(g||(g=p`ha-md-list{background:0 0;--md-list-item-leading-space:0;--md-list-item-trailing-space:0}.danger{--mdc-theme-primary:var(--error-color)}`))}}]}}),i.oi);a()}catch(h){a(h)}}))},42603:function(e,a,t){t.d(a,{k:function(){return s}});t(71695),t(19423),t(40251),t(47021);var n=t(36522);const i=()=>Promise.all([t.e("7442"),t.e("50437")]).then(t.bind(t,36943)),s=(e,a)=>new Promise((t=>{const s=null==a?void 0:a.cancel,c=null==a?void 0:a.submit;(0,n.B)(e,"show-dialog",{dialogTag:"ha-dialog-change-backup-encryption-key",dialogImport:i,dialogParams:Object.assign(Object.assign({},a),{},{cancel:()=>{t(!1),s&&s()},submit:e=>{t(e),c&&c(e)}})})}))},7111:function(e,a,t){t.d(a,{S:function(){return s}});t(71695),t(19423),t(40251),t(47021);var n=t(36522);const i=()=>Promise.all([t.e("7442"),t.e("28501")]).then(t.bind(t,82023)),s=(e,a)=>new Promise((t=>{const s=null==a?void 0:a.cancel,c=null==a?void 0:a.submit;(0,n.B)(e,"show-dialog",{dialogTag:"ha-dialog-set-backup-encryption-key",dialogImport:i,dialogParams:Object.assign(Object.assign({},a),{},{cancel:()=>{t(!1),s&&s()},submit:e=>{t(e),c&&c(e)}})})}))},13310:function(e,a,t){t.a(e,(async function(e,n){try{t.r(a);var i=t(61701),s=t(72621),c=(t(71695),t(19423),t(40251),t(47021),t(57243)),o=t(50778),d=t(72344),l=t(36522),u=t(22381),h=t(76320),r=(t(59826),t(54977),t(13928),t(34326),t(26779)),g=(t(87979),t(68545)),p=(t(5131),t(4322)),k=t(6384),_=e([g,p,k,r]);[g,p,k,r]=_.then?(await _)():_;let f,v,b=e=>e;(0,i.Z)([(0,o.Mo)("ha-config-backup-settings")],(function(e,a){class t extends a{constructor(...a){super(...a),e(this)}}return{F:t,d:[{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"cloudStatus",value:void 0},{kind:"field",decorators:[(0,o.Cb)({type:Boolean})],key:"narrow",value(){return!1}},{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"config",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_config",value:void 0},{kind:"method",key:"willUpdate",value:function(e){(0,s.Z)(t,"willUpdate",this,3)([e]),e.has("config")&&!this._config&&(this._config=this.config)}},{kind:"method",key:"firstUpdated",value:function(e){(0,s.Z)(t,"firstUpdated",this,3)([e]),this._scrollToSection()}},{kind:"method",key:"_scrollToSection",value:async function(){var e,a;if("locations"===window.location.hash.substring(1)&&(0,d.p)(this.hass,"hassio")&&(null===(e=this._config)||void 0===e||!e.create_backup.include_all_addons)&&null!==(a=this._config)&&void 0!==a&&null!==(a=a.create_backup.include_addons)&&void 0!==a&&a.length)return this.addEventListener("backup-addons-fetched",(async()=>{await(0,h.y)(),this._scrolltoHash()})),void setTimeout((()=>{this._clearHash()}),500);await(0,h.y)(),this._scrolltoHash()}},{kind:"method",key:"_scrolltoHash",value:function(){const e=window.location.hash.substring(1);if(e){const a=this.shadowRoot.getElementById(e);null==a||a.scrollIntoView(),this._clearHash()}}},{kind:"method",key:"_clearHash",value:function(){history.replaceState(null,"",window.location.pathname)}},{kind:"method",key:"render",value:function(){return this._config?(0,c.dy)(f||(f=b` <hass-subpage back-path="/config/backup" .hass="${0}" .narrow="${0}" .header="${0}"> <div class="content"> <ha-card id="schedule"> <div class="card-header">Automatic backups</div> <div class="card-content"> <p> Let Home Assistant take care of your backups by creating a scheduled backup that also removes older backups. </p> <ha-backup-config-schedule .hass="${0}" .value="${0}" @value-changed="${0}"></ha-backup-config-schedule> </div> </ha-card> <ha-card id="data"> <div class="card-header">Backup data</div> <div class="card-content"> <ha-backup-config-data .hass="${0}" .value="${0}" @value-changed="${0}" force-home-assistant hide-addon-version></ha-backup-config-data> </div> </ha-card> <ha-card class="agents" id="locations"> <div class="card-header">Locations</div> <div class="card-content"> <p> Your backup will be stored on these locations when this default backup is created. You can use all locations for custom backups. </p> <ha-backup-config-agents .hass="${0}" .value="${0}" .cloudStatus="${0}" @value-changed="${0}"></ha-backup-config-agents> </div> </ha-card> <ha-card> <div class="card-header">Encryption key</div> <div class="card-content"> <p> Keep this encryption key in a safe place, as you will need it to access your backup, allowing it to be restored. Download them as an emergency kit file and store it somewhere safe. Encryption keeps your backups private and secure. </p> <ha-backup-config-encryption-key .hass="${0}" .value="${0}" @value-changed="${0}"></ha-backup-config-encryption-key> </div> </ha-card> </div> </hass-subpage> `),this.hass,this.narrow,"Automatic backups",this.hass,this._config,this._scheduleConfigChanged,this.hass,this._dataConfig,this._dataConfigChanged,this.hass,this._config.create_backup.agent_ids,this.cloudStatus,this._agentsConfigChanged,this.hass,this._config.create_backup.password,this._encryptionKeyChanged):c.Ld}},{kind:"method",key:"_scheduleConfigChanged",value:function(e){const a=e.detail.value;this._config=Object.assign(Object.assign({},this._config),{},{schedule:a.schedule,retention:a.retention}),this._debounceSave()}},{kind:"get",key:"_dataConfig",value:function(){const{include_addons:e,include_all_addons:a,include_database:t,include_folders:n}=this._config.create_backup;return{include_homeassistant:!0,include_database:t,include_folders:n||void 0,include_all_addons:a,include_addons:e||void 0}}},{kind:"method",key:"_dataConfigChanged",value:function(e){const a=e.detail.value;this._config=Object.assign(Object.assign({},this._config),{},{create_backup:Object.assign(Object.assign({},this.config.create_backup),{},{include_database:a.include_database,include_folders:a.include_folders||null,include_all_addons:a.include_all_addons,include_addons:a.include_addons||null})}),this._debounceSave()}},{kind:"method",key:"_agentsConfigChanged",value:function(e){const a=e.detail.value;this._config=Object.assign(Object.assign({},this._config),{},{create_backup:Object.assign(Object.assign({},this._config.create_backup),{},{agent_ids:a})}),this._debounceSave()}},{kind:"method",key:"_encryptionKeyChanged",value:function(e){const a=e.detail.value;this._config=Object.assign(Object.assign({},this._config),{},{create_backup:Object.assign(Object.assign({},this._config.create_backup),{},{password:a})}),this._debounceSave()}},{kind:"field",key:"_debounceSave",value(){return(0,u.D)((()=>this._save()),500)}},{kind:"method",key:"_save",value:async function(){var e,a;await(0,r._r)(this.hass,{create_backup:{agent_ids:this._config.create_backup.agent_ids,include_folders:null!==(e=this._config.create_backup.include_folders)&&void 0!==e?e:[],include_database:this._config.create_backup.include_database,include_addons:null!==(a=this._config.create_backup.include_addons)&&void 0!==a?a:[],include_all_addons:this._config.create_backup.include_all_addons,password:this._config.create_backup.password},retention:this._config.retention,schedule:this._config.schedule.state}),(0,l.B)(this,"ha-refresh-backup-config")}},{kind:"field",static:!0,key:"styles",value(){return(0,c.iv)(v||(v=b`ha-card{scroll-margin-top:16px}.content{padding:28px 20px 0;max-width:690px;margin:0 auto;gap:24px;display:flex;flex-direction:column;margin-bottom:24px}.alert{--mdc-theme-primary:var(--error-color)}.card-header{padding-bottom:8px}.card-content{padding-bottom:0}`))}}]}}),c.oi);n()}catch(f){n(f)}}))}}]);
//# sourceMappingURL=62807.bdc39054669e6887.js.map