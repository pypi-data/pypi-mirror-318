"use strict";(self.webpackChunkjupyter_cassini=self.webpackChunkjupyter_cassini||[]).push([[487],{7023:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class s{}t._CodeOrName=s,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends s{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class n extends s{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof r&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function i(e,...t){const s=[e[0]];let r=0;for(;r<t.length;)u(s,t[r]),s.push(e[++r]);return new n(s)}t._Code=n,t.nil=new n(""),t._=i;const o=new n("+");function a(e,...t){const s=[c(e[0])];let r=0;for(;r<t.length;)s.push(o),u(s,t[r]),s.push(o,c(e[++r]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===o){const s=h(e[t-1],e[t+1]);if(void 0!==s){e.splice(t-1,3,s);continue}e[t++]="+"}t++}}(s),new n(s)}function u(e,t){var s;t instanceof n?e.push(...t._items):t instanceof r?e.push(t):e.push("number"==typeof(s=t)||"boolean"==typeof s||null===s?s:c(Array.isArray(s)?s.join(","):s))}function h(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof r||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof r?void 0:`"${e}${t.slice(1)}`}function c(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=a,t.addCodeArg=u,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:a`${e}${t}`},t.stringify=function(e){return new n(c(e))},t.safeStringify=c,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new n(`.${e}`):i`[${e}]`},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new n(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},t.regexpCode=function(e){return new n(e.toString())}},3487:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const r=s(7023),n=s(8490);var i=s(7023);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return i.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return i.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return i.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return i.Name}});var o=s(8490);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return o.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return o.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return o.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return o.varKinds}}),t.operators={GT:new r._Code(">"),GTE:new r._Code(">="),LT:new r._Code("<"),LTE:new r._Code("<="),EQ:new r._Code("==="),NEQ:new r._Code("!=="),NOT:new r._Code("!"),OR:new r._Code("||"),AND:new r._Code("&&"),ADD:new r._Code("+")};class a{optimizeNodes(){return this}optimizeNames(e,t){return this}}class u extends a{constructor(e,t,s){super(),this.varKind=e,this.name=t,this.rhs=s}render({es5:e,_n:t}){const s=e?n.varKinds.var:this.varKind,r=void 0===this.rhs?"":` = ${this.rhs}`;return`${s} ${this.name}${r};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=P(this.rhs,e,t)),this}get names(){return this.rhs instanceof r._CodeOrName?this.rhs.names:{}}}class h extends a{constructor(e,t,s){super(),this.lhs=e,this.rhs=t,this.sideEffects=s}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof r.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=P(this.rhs,e,t),this}get names(){return O(this.lhs instanceof r.Name?{}:{...this.lhs.names},this.rhs)}}class c extends h{constructor(e,t,s,r){super(e,s,r),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class d extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class l extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class p extends a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class f extends a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=P(this.code,e,t),this}get names(){return this.code instanceof r._CodeOrName?this.code.names:{}}}class m extends a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,s)=>t+s.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const s=e[t].optimizeNodes();Array.isArray(s)?e.splice(t,1,...s):s?e[t]=s:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:s}=this;let r=s.length;for(;r--;){const n=s[r];n.optimizeNames(e,t)||(K(e,n.names),s.splice(r,1))}return s.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>z(e,t.names)),{})}}class _ extends m{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class N extends m{}class v extends _{}v.kind="else";class g extends _{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new v(e):e}return t?!1===e?t instanceof g?t:t.nodes:this.nodes.length?this:new g(I(e),t instanceof g?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var s;if(this.else=null===(s=this.else)||void 0===s?void 0:s.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=P(this.condition,e,t),this}get names(){const e=super.names;return O(e,this.condition),this.else&&z(e,this.else.names),e}}g.kind="if";class w extends _{}w.kind="for";class $ extends w{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=P(this.iteration,e,t),this}get names(){return z(super.names,this.iteration.names)}}class y extends w{constructor(e,t,s,r){super(),this.varKind=e,this.name=t,this.from=s,this.to=r}render(e){const t=e.es5?n.varKinds.var:this.varKind,{name:s,from:r,to:i}=this;return`for(${t} ${s}=${r}; ${s}<${i}; ${s}++)`+super.render(e)}get names(){const e=O(super.names,this.from);return O(e,this.to)}}class b extends w{constructor(e,t,s,r){super(),this.loop=e,this.varKind=t,this.name=s,this.iterable=r}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=P(this.iterable,e,t),this}get names(){return z(super.names,this.iterable.names)}}class C extends _{constructor(e,t,s){super(),this.name=e,this.args=t,this.async=s}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}C.kind="func";class x extends m{render(e){return"return "+super.render(e)}}x.kind="return";class S extends _{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var s,r;return super.optimizeNames(e,t),null===(s=this.catch)||void 0===s||s.optimizeNames(e,t),null===(r=this.finally)||void 0===r||r.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&z(e,this.catch.names),this.finally&&z(e,this.finally.names),e}}class k extends _{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}k.kind="catch";class E extends _{render(e){return"finally"+super.render(e)}}function z(e,t){for(const s in t)e[s]=(e[s]||0)+(t[s]||0);return e}function O(e,t){return t instanceof r._CodeOrName?z(e,t.names):e}function P(e,t,s){return e instanceof r.Name?i(e):(n=e)instanceof r._Code&&n._items.some((e=>e instanceof r.Name&&1===t[e.str]&&void 0!==s[e.str]))?new r._Code(e._items.reduce(((e,t)=>(t instanceof r.Name&&(t=i(t)),t instanceof r._Code?e.push(...t._items):e.push(t),e)),[])):e;var n;function i(e){const r=s[e.str];return void 0===r||1!==t[e.str]?e:(delete t[e.str],r)}}function K(e,t){for(const s in t)e[s]=(e[s]||0)-(t[s]||0)}function I(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:r._`!${A(e)}`}E.kind="finally",t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new n.Scope({parent:e}),this._nodes=[new N]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const s=this._extScope.value(e,t);return(this._values[s.prefix]||(this._values[s.prefix]=new Set)).add(s),s}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,s,r){const n=this._scope.toName(t);return void 0!==s&&r&&(this._constants[n.str]=s),this._leafNode(new u(e,n,s)),n}const(e,t,s){return this._def(n.varKinds.const,e,t,s)}let(e,t,s){return this._def(n.varKinds.let,e,t,s)}var(e,t,s){return this._def(n.varKinds.var,e,t,s)}assign(e,t,s){return this._leafNode(new h(e,t,s))}add(e,s){return this._leafNode(new c(e,t.operators.ADD,s))}code(e){return"function"==typeof e?e():e!==r.nil&&this._leafNode(new f(e)),this}object(...e){const t=["{"];for(const[s,n]of e)t.length>1&&t.push(","),t.push(s),(s!==n||this.opts.es5)&&(t.push(":"),(0,r.addCodeArg)(t,n));return t.push("}"),new r._Code(t)}if(e,t,s){if(this._blockNode(new g(e)),t&&s)this.code(t).else().code(s).endIf();else if(t)this.code(t).endIf();else if(s)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new g(e))}else(){return this._elseNode(new v)}endIf(){return this._endBlockNode(g,v)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new $(e),t)}forRange(e,t,s,r,i=(this.opts.es5?n.varKinds.var:n.varKinds.let)){const o=this._scope.toName(e);return this._for(new y(i,o,t,s),(()=>r(o)))}forOf(e,t,s,i=n.varKinds.const){const o=this._scope.toName(e);if(this.opts.es5){const e=t instanceof r.Name?t:this.var("_arr",t);return this.forRange("_i",0,r._`${e}.length`,(t=>{this.var(o,r._`${e}[${t}]`),s(o)}))}return this._for(new b("of",i,o,t),(()=>s(o)))}forIn(e,t,s,i=(this.opts.es5?n.varKinds.var:n.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,r._`Object.keys(${t})`,s);const o=this._scope.toName(e);return this._for(new b("in",i,o,t),(()=>s(o)))}endFor(){return this._endBlockNode(w)}label(e){return this._leafNode(new d(e))}break(e){return this._leafNode(new l(e))}return(e){const t=new x;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(x)}try(e,t,s){if(!t&&!s)throw new Error('CodeGen: "try" without "catch" and "finally"');const r=new S;if(this._blockNode(r),this.code(e),t){const e=this.name("e");this._currNode=r.catch=new k(e),t(e)}return s&&(this._currNode=r.finally=new E,this.code(s)),this._endBlockNode(k,E)}throw(e){return this._leafNode(new p(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const s=this._nodes.length-t;if(s<0||void 0!==e&&s!==e)throw new Error(`CodeGen: wrong number of nodes: ${s} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=r.nil,s,n){return this._blockNode(new C(e,t,s)),n&&this.code(n).endFunc(),this}endFunc(){return this._endBlockNode(C)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const s=this._currNode;if(s instanceof e||t&&s instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof g))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=I;const V=G(t.operators.AND);t.and=function(...e){return e.reduce(V)};const j=G(t.operators.OR);function G(e){return(t,s)=>t===r.nil?s:s===r.nil?t:r._`${A(t)} ${e} ${A(s)}`}function A(e){return e instanceof r.Name?e:r._`(${e})`}t.or=function(...e){return e.reduce(j)}},8490:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const r=s(7023);class n extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var i;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(i||(t.UsedValueState=i={})),t.varKinds={const:new r.Name("const"),let:new r.Name("let"),var:new r.Name("var")};class o{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof r.Name?e:this.name(e)}name(e){return new r.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,s;if((null===(s=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===s?void 0:s.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=o;class a extends r.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:s}){this.value=e,this.scopePath=r._`.${new r.Name(t)}[${s}]`}}t.ValueScopeName=a;const u=r._`\n`;t.ValueScope=class extends o{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?u:r.nil}}get(){return this._scope}name(e){return new a(e,this._newName(e))}value(e,t){var s;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const r=this.toName(e),{prefix:n}=r,i=null!==(s=t.key)&&void 0!==s?s:t.ref;let o=this._values[n];if(o){const e=o.get(i);if(e)return e}else o=this._values[n]=new Map;o.set(i,r);const a=this._scope[n]||(this._scope[n]=[]),u=a.length;return a[u]=t.ref,r.setValue(t,{property:n,itemIndex:u}),r}getValue(e,t){const s=this._values[e];if(s)return s.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,(t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return r._`${e}${t.scopePath}`}))}scopeCode(e=this._values,t,s){return this._reduceValues(e,(e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,s)}_reduceValues(e,s,o={},a){let u=r.nil;for(const h in e){const c=e[h];if(!c)continue;const d=o[h]=o[h]||new Map;c.forEach((e=>{if(d.has(e))return;d.set(e,i.Started);let o=s(e);if(o){const s=this.opts.es5?t.varKinds.var:t.varKinds.const;u=r._`${u}${s} ${e} = ${o};${this.opts._n}`}else{if(!(o=null==a?void 0:a(e)))throw new n(e);u=r._`${u}${o}${this.opts._n}`}d.set(e,i.Completed)}))}return u}}}}]);