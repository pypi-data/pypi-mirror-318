import{s as le,k as R,l as X,m as ie,d as _,o as U,i as T,j as P,p as ne,y as q,e as v,t as Z,c as b,a as k,b as x,f as y,g as c,h as $,A as C,D as L}from"../chunks/scheduler.BUEsFZp5.js";import{S as me,i as ue,t as W,a as z,c as ce,f as O,b as de,d as fe,m as ge,e as _e,g as pe}from"../chunks/index.DMbsBxcm.js";import{g as ee}from"../chunks/entry.DuGA_34m.js";import{p as he}from"../chunks/stores.DHywbwUK.js";import{d as se}from"../chunks/dayjs.min.CnqrW7zs.js";import{g as te,W as ve,m as be}from"../chunks/index.CcMTgheG.js";import{b as ye,d as we}from"../chunks/index.CjUFg5J_.js";import{g as Ie}from"../chunks/index.Cd5ib13o.js";import{M as Me}from"../chunks/Messages.C1UzXcEa.js";import"../chunks/Toaster.svelte_svelte_type_style_lang.BMvSSSfm.js";import"../chunks/Modal.BdpuBmtX.js";import"../chunks/updater.BTt9jhxK.js";import"../chunks/marked.esm._0_gBwjO.js";import{g as ke}from"../chunks/index.BmVB_xaJ.js";import{g as De}from"../chunks/index.DOgaafJe.js";import"../chunks/FileSaver.min.CimDdHIv.js";import"../chunks/postcss._TrgWD3d.js";import"../chunks/index.DQfRr7yB.js";function ae(e){let m,t,l,i,a,o,u,w,h=se(e[4].chat.timestamp).format(e[10].t("MMMM DD, YYYY"))+"",D,I,E,S,M,d,n,f,V,Y,B,s;function H(r){e[14](r)}function oe(r){e[15](r)}function re(r){e[16](r)}let j={user:e[5],chatId:e[8],readOnly:!0,selectedModels:e[3],processing:Se,bottomPadding:e[12].length>0,sendPrompt:Ve,continueResponse:Ye,regenerateResponse:Be};return e[0]!==void 0&&(j.history=e[0]),e[7]!==void 0&&(j.messages=e[7]),e[2]!==void 0&&(j.autoScroll=e[2]),f=new Me({props:j}),q.push(()=>O(f,"history",H)),q.push(()=>O(f,"messages",oe)),q.push(()=>O(f,"autoScroll",re)),{c(){m=v("div"),t=v("div"),l=v("div"),i=v("div"),a=v("div"),o=Z(e[6]),u=R(),w=v("div"),D=Z(h),I=R(),E=v("hr"),S=R(),M=v("div"),d=v("div"),n=v("div"),de(f.$$.fragment),this.h()},l(r){m=b(r,"DIV",{class:!0});var g=k(m);t=b(g,"DIV",{class:!0});var p=k(t);l=b(p,"DIV",{class:!0});var A=k(l);i=b(A,"DIV",{});var N=k(i);a=b(N,"DIV",{class:!0});var F=k(a);o=x(F,e[6]),F.forEach(_),u=U(N),w=b(N,"DIV",{class:!0});var G=k(w);D=x(G,h),G.forEach(_),N.forEach(_),I=U(A),E=b(A,"HR",{class:!0}),A.forEach(_),S=U(p),M=b(p,"DIV",{class:!0,id:!0});var J=k(M);d=b(J,"DIV",{class:!0});var K=k(d);n=b(K,"DIV",{class:!0});var Q=k(n);fe(f.$$.fragment,Q),Q.forEach(_),K.forEach(_),J.forEach(_),p.forEach(_),g.forEach(_),this.h()},h(){y(a,"class","text-3xl font-semibold line-clamp-1"),y(w,"class","mt-1 text-gray-400"),y(E,"class","border-gray-50 dark:border-gray-850 mt-6 mb-2"),y(l,"class","px-3 w-full max-w-5xl mx-auto"),y(n,"class","py-2"),y(d,"class","h-full w-full flex flex-col py-4"),y(M,"class","flex flex-col w-full flex-auto overflow-auto h-0"),y(M,"id","messages-container"),y(t,"class","flex flex-col flex-auto justify-center py-8"),y(m,"class","min-h-screen max-h-screen w-full flex flex-col text-gray-700 dark:text-gray-100 bg-white dark:bg-gray-900")},m(r,g){T(r,m,g),c(m,t),c(t,l),c(l,i),c(i,a),c(a,o),c(i,u),c(i,w),c(w,D),c(l,I),c(l,E),c(t,S),c(t,M),c(M,d),c(d,n),ge(f,n,null),s=!0},p(r,g){(!s||g&64)&&$(o,r[6]),(!s||g&1040)&&h!==(h=se(r[4].chat.timestamp).format(r[10].t("MMMM DD, YYYY"))+"")&&$(D,h);const p={};g&32&&(p.user=r[5]),g&256&&(p.chatId=r[8]),g&8&&(p.selectedModels=r[3]),!V&&g&1&&(V=!0,p.history=r[0],C(()=>V=!1)),!Y&&g&128&&(Y=!0,p.messages=r[7],C(()=>Y=!1)),!B&&g&4&&(B=!0,p.autoScroll=r[2],C(()=>B=!1)),f.$set(p)},i(r){s||(W(f.$$.fragment,r),s=!0)},o(r){z(f.$$.fragment,r),s=!1},d(r){r&&_(m),_e(f)}}}function Ee(e){let m,t,l,i;document.title=m=`
		`+(e[6]?`${e[6].length>30?`${e[6].slice(0,30)}...`:e[6]} | ${e[9]}`:`${e[9]}`)+`
	`;let a=e[1]&&ae(e);return{c(){t=R(),a&&a.c(),l=X()},l(o){ie("svelte-1123lr8",document.head).forEach(_),t=U(o),a&&a.l(o),l=X()},m(o,u){T(o,t,u),a&&a.m(o,u),T(o,l,u),i=!0},p(o,[u]){(!i||u&576)&&m!==(m=`
		`+(o[6]?`${o[6].length>30?`${o[6].slice(0,30)}...`:o[6]} | ${o[9]}`:`${o[9]}`)+`
	`)&&(document.title=m),o[1]?a?(a.p(o,u),u&2&&W(a,1)):(a=ae(o),a.c(),W(a,1),a.m(l.parentNode,l)):a&&(pe(),z(a,1,1,()=>{a=null}),ce())},i(o){i||(W(a),i=!0)},o(o){z(a),i=!1},d(o){o&&(_(t),_(l)),a&&a.d(o)}}}let Se="";const Ve=()=>{},Ye=()=>{},Be=()=>{};function je(e,m,t){let l,i,a,o;P(e,te,s=>t(8,l=s)),P(e,he,s=>t(13,i=s)),P(e,ve,s=>t(9,a=s));const u=ne("i18n");P(e,u,s=>t(10,o=s));let w=!1,h=!0,D=[""],I=null,E=null,S="",M=[],d=[],n={messages:{},currentId:null};const f=async()=>{if(await be.set(await ke(localStorage.token)),await te.set(i.params.id),t(4,I=await Ie(localStorage.token,l).catch(async s=>(await ee("/"),null))),I){t(5,E=await De(localStorage.token,I.user_id).catch(H=>(console.error(H),null)));const s=I.chat;return s?(console.log(s),t(3,D=((s==null?void 0:s.models)??void 0)!==void 0?s.models:[s.models??""]),t(0,n=((s==null?void 0:s.history)??void 0)!==void 0?s.history:we(s.messages)),t(6,S=s.title),t(2,h=!0),await L(),d.length>0&&t(0,n.messages[d.at(-1).id].done=!0,n),await L(),!0):null}};function V(s){n=s,t(0,n)}function Y(s){d=s,t(7,d),t(0,n)}function B(s){h=s,t(2,h)}return e.$$.update=()=>{e.$$.dirty&1&&t(7,d=ye(n,n.currentId)),e.$$.dirty&8192&&i.params.id&&(async()=>await f()?(await L(),t(1,w=!0)):await ee("/"))()},[n,w,h,D,I,E,S,d,l,a,o,u,M,i,V,Y,B]}class Xe extends me{constructor(m){super(),ue(this,m,je,Ee,le,{})}}export{Xe as component};
//# sourceMappingURL=35.DegFrJaa.js.map
