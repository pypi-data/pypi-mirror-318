"use strict";(self["webpackChunkSimple_Web_based_Interface_for_Scanner"]=self["webpackChunkSimple_Web_based_Interface_for_Scanner"]||[]).push([[384],{8384:(e,t,i)=>{i.r(t),i.d(t,{default:()=>v});var n=i(3673),o=i(2323),s=i(8880);const l={key:0,style:{position:"absolute",left:"40%"}},a=["href"],r=(0,n.Uk)("Print now");function c(e,t,i,c,d,u){const p=(0,n.up)("q-circular-progress"),m=(0,n.up)("q-img"),g=(0,n.up)("q-icon"),f=(0,n.up)("q-select"),h=(0,n.up)("q-input"),y=(0,n.up)("q-btn"),q=(0,n.up)("q-form"),_=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(_,{class:"col text-center q-pt-md"},{default:(0,n.w5)((()=>[e.inProgress?((0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(p,{indeterminate:"",size:"100pt",thickness:.6,color:"lime","center-color":"grey-8",class:"q-ma-md"},null,8,["thickness"])])):(0,n.kq)("",!0),void 0!=e.filename?((0,n.wg)(),(0,n.iD)("div",{key:1,style:(0,o.j5)({opacity:e.inProgress?.5:1})},[e.filename.endsWith(".jpg")||e.filename.endsWith(".jpeg")||e.filename.endsWith(".png")?((0,n.wg)(),(0,n.j4)(m,{key:0,class:"text-center",fit:"contain",style:{width:"128px","max-height":"128px",height:"128px",border:"1px solid #eee"},"img-style":{"min-width":"100%","min-height":"100%","object-fit":"cover"},src:`${e.thumbnail_url}`,"spinner-color":"black"},null,8,["src"])):e.filename.endsWith(".pdf")?((0,n.wg)(),(0,n.j4)(g,{key:1,name:"picture_as_pdf",class:"text-center",fit:"contain",size:"64px",color:"red"})):(0,n.kq)("",!0),(0,n._)("div",null,[(0,n._)("strong",null,[(0,n._)("a",{href:e.image_url,style:{"font-size":"0.9rem"}},(0,o.zw)(e.filename),9,a)])]),(0,n.Wm)(q,{onSubmit:(0,s.iM)(e.startPrinting,["prevent"]),class:"q-mx-lg q-mt-lg"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{modelValue:e.quality,"onUpdate:modelValue":t[0]||(t[0]=t=>e.quality=t),options:e.qualityOptions,label:"Quality",outlined:"",class:"q-mx-md q-my-xs"},null,8,["modelValue","options"]),(0,n.Wm)(f,{modelValue:e.sides,"onUpdate:modelValue":t[1]||(t[1]=t=>e.sides=t),options:e.sidesOptions,label:"Sides",outlined:"",class:"q-mx-md q-my-xs"},null,8,["modelValue","options"]),(0,n.Wm)(f,{modelValue:e.orientation,"onUpdate:modelValue":t[2]||(t[2]=t=>e.orientation=t),options:e.orientationOptions,label:"Orientation",outlined:"",class:"q-mx-md q-my-xs"},null,8,["modelValue","options"]),(0,n.Wm)(h,{modelValue:e.pages,"onUpdate:modelValue":t[3]||(t[3]=t=>e.pages=t),label:"Pages (empty for all)",outlined:"",class:"q-mx-md q-my-xs"},null,8,["modelValue"]),(0,n.Wm)(y,{color:"green",class:(0,o.C_)({"q-mt-md":e.$q.screen.gt.xs}),style:{"font-size":"1.5rem"},type:"submit",icon:"scanner"},{default:(0,n.w5)((()=>[r])),_:1},8,["class"])])),_:1},8,["onSubmit"])],4)):(0,n.kq)("",!0)])),_:1})}i(71),i(6016),i(2100),i(812),i(979),i(6105),i(5123),i(8685),i(2396);const d=(0,n.aZ)({name:"PageScan",data:function(){return{config:void 0,quality:"default",qualityOptions:["default","draft","normal","best"],sides:"default",sidesOptions:["default","one-sided","two-sided-long-edge","two-sided-short-edge"],orientation:"default",orientationOptions:["default","portrait","landscape"],pages:"",inProgress:!1}},computed:{filename:function(){var e;let t=new URLSearchParams(window.location.hash.split("?")[1]);return null!==(e=t.get("filename"))&&void 0!==e?e:void 0},thumbnail_url:function(){return void 0==this.config?void 0:`http://${this.config.api_url}:${this.config.api_port}${this.config.scans_url}/thumbs/${this.filename}.thumb.jpg`},image_url:function(){return void 0==this.config?void 0:`http://${this.config.api_url}:${this.config.api_port}${this.config.scans_url}/${this.filename}`},print_url:function(){return`http://${this.config.api_url}:${this.config.api_port}/print/execute`}},created(){},mounted(){this.getJSON("config","config.json").then((e=>{this.config=e}))},methods:{getJSON:function(e,t){return new Promise(((i,n)=>{this.$axios.get(t).then((t=>{let n=t.data;localStorage.setItem(e,JSON.stringify(n)),i(n)})).catch((e=>{this.$q.notify({color:"negative",message:`Error loading ${t}`,icon:"report_problem"}),console.error(e),n(e)}))}))},startPrinting:function(){this.inProgress=!0,this.$axios.post(this.print_url,{filename:`${this.filename}`,quality:`${this.quality}`,orientation:`${this.orientation}`,sides:`${this.sides}`,pages:`${this.pages}`}).then((e=>{console.log(e),0==e.data.code?(this.filename=e.data.filename,this.$q.notify({color:"positive",message:"Job sent to printer"})):(this.$q.notify({color:"negative",message:"Error while printing",icon:"report_problem"}),console.error(e)),this.inProgress=!1})).catch((e=>{this.$q.notify({color:"negative",message:"Error while printing",icon:"report_problem"}),console.error(e),this.inProgress=!1}))},getTypeFromFilename:function(e){let t=e.split(".").pop().toLowerCase();if("png"==t)return"png";if(["jpg","jpeg"].includes(t))return"jpeg";throw"Unsupported filetype."},dataURLtoFile:function(e,t){const i=e.split(","),n=i[0].match(/:(.*?);/)[1],o=atob(i[1]);let s=o.length;const l=new Uint8Array(s);while(s)l[s-1]=o.charCodeAt(s-1),s-=1;return new File([l],t,{type:n})},reloadImage:function(e){},downloadImage:function(){var e=document.createElement("a");e.setAttribute("href",this.getImageData()),e.setAttribute("download",this.filename),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}});var u=i(4260),p=i(4379),m=i(6122),g=i(4027),f=i(4554),h=i(5269),y=i(1760),q=i(4842),_=i(4607),b=i(7518),w=i.n(b);const $=(0,u.Z)(d,[["render",c]]),v=$;w()(d,"components",{QPage:p.Z,QCircularProgress:m.Z,QImg:g.Z,QIcon:f.Z,QForm:h.Z,QSelect:y.Z,QInput:q.Z,QBtn:_.Z})}}]);