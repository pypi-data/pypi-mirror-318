/*! For license information please see 971.js.LICENSE.txt */
"use strict";exports.id=971,exports.ids=[971],exports.modules={52971:(e,t,n)=>{n.r(t),n.d(t,{TomlDate:()=>b,TomlError:()=>r,default:()=>P,parse:()=>D,stringify:()=>M});class r extends Error{line;column;codeblock;constructor(e,t){const[n,r]=function(e,t){let n=e.slice(0,t).split(/\r\n|\n|\r/g);return[n.length,n.pop().length+1]}(t.toml,t.ptr),i=function(e,t,n){let r=e.split(/\r\n|\n|\r/g),i="",l=1+(0|Math.log10(t+1));for(let e=t-1;e<=t+1;e++){let o=r[e-1];o&&(i+=e.toString().padEnd(l," "),i+=":  ",i+=o,i+="\n",e===t&&(i+=" ".repeat(l+n+2),i+="^\n"))}return i}(t.toml,n,r);super(`Invalid TOML document: ${e}\n\n${i}`,t),this.line=n,this.column=r,this.codeblock=i}}function i(e,t=0,n=e.length){let r=e.indexOf("\n",t);return"\r"===e[r-1]&&r--,r<=n?r:-1}function l(e,t){for(let n=t;n<e.length;n++){let i=e[n];if("\n"===i)return n;if("\r"===i&&"\n"===e[n+1])return n+1;if(i<" "&&"\t"!==i||""===i)throw new r("control characters are not allowed in comments",{toml:e,ptr:t})}return e.length}function o(e,t,n,r){let i;for(;" "===(i=e[t])||"\t"===i||!n&&("\n"===i||"\r"===i&&"\n"===e[t+1]);)t++;return r||"#"!==i?t:o(e,l(e,t),n)}function a(e,t,n,l,o=!1){if(!l)return(t=i(e,t))<0?e.length:t;for(let r=t;r<e.length;r++){let t=e[r];if("#"===t)r=i(e,r);else{if(t===n)return r+1;if(t===l)return r;if(o&&("\n"===t||"\r"===t&&"\n"===e[r+1]))return r}}throw new r("cannot find end of structure",{toml:e,ptr:t})}function f(e,t){let n=e[t],r=n===e[t+1]&&e[t+1]===e[t+2]?e.slice(t,t+3):n;t+=r.length-1;do{t=e.indexOf(r,++t)}while(t>-1&&"'"!==n&&"\\"===e[t-1]&&"\\"!==e[t-2]);return t>-1&&(t+=r.length,r.length>1&&(e[t]===n&&t++,e[t]===n&&t++)),t}var s,u,c,d=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},h=(e,t,n)=>(d(e,t,"read from private field"),n?n.call(e):t.get(e)),w=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},p=(e,t,n,r)=>(d(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);let m=/^(\d{4}-\d{2}-\d{2})?[T ]?(?:(\d{2}):\d{2}:\d{2}(?:\.\d+)?)?(Z|[-+]\d{2}:\d{2})?$/i;const g=class e extends Date{constructor(e){let t=!0,n=!0,r="Z";if("string"==typeof e){let i=e.match(m);i?(i[1]||(t=!1,e=`0000-01-01T${e}`),n=!!i[2],i[2]&&+i[2]>23?e="":(r=i[3]||null,e=e.toUpperCase(),!r&&n&&(e+="Z"))):e=""}super(e),w(this,s,!1),w(this,u,!1),w(this,c,null),isNaN(this.getTime())||(p(this,s,t),p(this,u,n),p(this,c,r))}isDateTime(){return h(this,s)&&h(this,u)}isLocal(){return!h(this,s)||!h(this,u)||!h(this,c)}isDate(){return h(this,s)&&!h(this,u)}isTime(){return h(this,u)&&!h(this,s)}isValid(){return h(this,s)||h(this,u)}toISOString(){let e=super.toISOString();if(this.isDate())return e.slice(0,10);if(this.isTime())return e.slice(11,23);if(null===h(this,c))return e.slice(0,-1);if("Z"===h(this,c))return e;let t=60*+h(this,c).slice(1,3)+ +h(this,c).slice(4,6);return t="-"===h(this,c)[0]?t:-t,new Date(this.getTime()-6e4*t).toISOString().slice(0,-1)+h(this,c)}static wrapAsOffsetDateTime(t,n="Z"){let r=new e(t);return p(r,c,n),r}static wrapAsLocalDateTime(t){let n=new e(t);return p(n,c,null),n}static wrapAsLocalDate(t){let n=new e(t);return p(n,u,!1),p(n,c,null),n}static wrapAsLocalTime(t){let n=new e(t);return p(n,s,!1),p(n,c,null),n}};s=new WeakMap,u=new WeakMap,c=new WeakMap;let b=g,y=/^((0x[0-9a-fA-F](_?[0-9a-fA-F])*)|(([+-]|0[ob])?\d(_?\d)*))$/,v=/^[+-]?\d(_?\d)*(\.\d(_?\d)*)?([eE][+-]?\d(_?\d)*)?$/,x=/^[+-]?0[0-9_]/,O=/^[0-9a-f]{4,8}$/i,T={b:"\b",t:"\t",n:"\n",f:"\f",r:"\r",'"':'"',"\\":"\\"};function j(e,t=0,n=e.length){let i="'"===e[t],l=e[t++]===e[t]&&e[t]===e[t+1];l&&(n-=2,"\r"===e[t+=2]&&t++,"\n"===e[t]&&t++);let a,f=0,s="",u=t;for(;t<n-1;){let n=e[t++];if("\n"===n||"\r"===n&&"\n"===e[t]){if(!l)throw new r("newlines are not allowed in strings",{toml:e,ptr:t-1})}else if(n<" "&&"\t"!==n||""===n)throw new r("control characters are not allowed in strings",{toml:e,ptr:t-1});if(a){if(a=!1,"u"===n||"U"===n){let i=e.slice(t,t+="u"===n?4:8);if(!O.test(i))throw new r("invalid unicode escape",{toml:e,ptr:f});try{s+=String.fromCodePoint(parseInt(i,16))}catch{throw new r("invalid unicode escape",{toml:e,ptr:f})}}else if(!l||"\n"!==n&&" "!==n&&"\t"!==n&&"\r"!==n){if(!(n in T))throw new r("unrecognized escape sequence",{toml:e,ptr:f});s+=T[n]}else{if("\n"!==e[t=o(e,t-1,!0)]&&"\r"!==e[t])throw new r("invalid escape: only line-ending whitespace may be escaped",{toml:e,ptr:f});t=o(e,t)}u=t}else i||"\\"!==n||(f=t-1,a=!0,s+=e.slice(u,f))}return s+e.slice(u,n-1)}function k(e,t,n){if("true"===e)return!0;if("false"===e)return!1;if("-inf"===e)return-1/0;if("inf"===e||"+inf"===e)return 1/0;if("nan"===e||"+nan"===e||"-nan"===e)return NaN;if("-0"===e)return 0;let i;if((i=y.test(e))||v.test(e)){if(x.test(e))throw new r("leading zeroes are not allowed",{toml:t,ptr:n});let l=+e.replace(/_/g,"");if(isNaN(l))throw new r("invalid number",{toml:t,ptr:n});if(i&&!Number.isSafeInteger(l))throw new r("integer value cannot be represented losslessly",{toml:t,ptr:n});return l}let l=new b(e);if(!l.isValid())throw new r("invalid value",{toml:t,ptr:n});return l}function $(e,t,n,s){if(0===s)throw new r("document contains excessively nested structures. aborting.",{toml:e,ptr:t});let u,c=e[t];if("["===c||"{"===c){let[o,f]="["===c?function(e,t,n){let i,o=[];for(t++;"]"!==(i=e[t++])&&i;){if(","===i)throw new r("expected value, found comma",{toml:e,ptr:t-1});if("#"===i)t=l(e,t);else if(" "!==i&&"\t"!==i&&"\n"!==i&&"\r"!==i){let r=$(e,t-1,"]",n-1);o.push(r[0]),t=r[1]}}if(!i)throw new r("unfinished array encountered",{toml:e,ptr:t});return[o,t]}(e,t,s):function(e,t,n){let i,l={},o=new Set,a=0;for(t++;"}"!==(i=e[t++])&&i;){if("\n"===i)throw new r("newlines are not allowed in inline tables",{toml:e,ptr:t-1});if("#"===i)throw new r("inline tables cannot contain comments",{toml:e,ptr:t-1});if(","===i)throw new r("expected key-value, found comma",{toml:e,ptr:t-1});if(" "!==i&&"\t"!==i){let i,f=l,s=!1,[u,c]=_(e,t-1);for(let n=0;n<u.length;n++){if(n&&(f=s?f[i]:f[i]={}),i=u[n],(s=Object.hasOwn(f,i))&&("object"!=typeof f[i]||o.has(f[i])))throw new r("trying to redefine an already defined value",{toml:e,ptr:t});s||"__proto__"!==i||Object.defineProperty(f,i,{enumerable:!0,configurable:!0,writable:!0})}if(s)throw new r("trying to redefine an already defined value",{toml:e,ptr:t});let[d,h]=$(e,c,"}",n-1);o.add(d),f[i]=d,a=","===e[(t=h)-1]?t-1:0}}if(a)throw new r("trailing commas are not allowed in inline tables",{toml:e,ptr:a});if(!i)throw new r("unfinished table encountered",{toml:e,ptr:t});return[l,t]}(e,t,s),u=a(e,f,",",n);if("}"===n){let t=i(e,f,u);if(t>-1)throw new r("newlines are not allowed in inline tables",{toml:e,ptr:t})}return[o,u]}if('"'===c||"'"===c){u=f(e,t);let i=j(e,t,u);if(n){if(u=o(e,u,"]"!==n),e[u]&&","!==e[u]&&e[u]!==n&&"\n"!==e[u]&&"\r"!==e[u])throw new r("unexpected character encountered",{toml:e,ptr:u});u+=+(","===e[u])}return[i,u]}u=a(e,t,",",n);let d=function(e,t,n,i){let o=e.slice(t,n),a=o.indexOf("#");a>-1&&(l(e,a),o=o.slice(0,a));let f=o.trimEnd();if(!i){let n=o.indexOf("\n",f.length);if(n>-1)throw new r("newlines are not allowed in inline tables",{toml:e,ptr:t+n})}return[f,a]}(e,t,u-+(","===e[u-1]),"]"===n);if(!d[0])throw new r("incomplete key-value declaration: no value specified",{toml:e,ptr:t});return n&&d[1]>-1&&(u=o(e,t+d[1]),u+=+(","===e[u])),[k(d[0],e,t),u]}let S=/^[a-zA-Z0-9-_]+[ \t]*$/;function _(e,t,n="="){let l=t-1,a=[],s=e.indexOf(n,t);if(s<0)throw new r("incomplete key-value: cannot find end of key",{toml:e,ptr:t});do{let o=e[t=++l];if(" "!==o&&"\t"!==o)if('"'===o||"'"===o){if(o===e[t+1]&&o===e[t+2])throw new r("multiline strings are not allowed in keys",{toml:e,ptr:t});let u=f(e,t);if(u<0)throw new r("unfinished string encountered",{toml:e,ptr:t});l=e.indexOf(".",u);let c=e.slice(u,l<0||l>s?s:l),d=i(c);if(d>-1)throw new r("newlines are not allowed in keys",{toml:e,ptr:t+l+d});if(c.trimStart())throw new r("found extra tokens after the string part",{toml:e,ptr:u});if(s<u&&(s=e.indexOf(n,u),s<0))throw new r("incomplete key-value: cannot find end of key",{toml:e,ptr:t});a.push(j(e,t,u))}else{l=e.indexOf(".",t);let n=e.slice(t,l<0||l>s?s:l);if(!S.test(n))throw new r("only letter, numbers, dashes and underscores are allowed in keys",{toml:e,ptr:t});a.push(n.trimEnd())}}while(l+1&&l<s);return[a,o(e,s+1,!0,!0)]}function E(e,t,n,r){var i,l;let o,a,f=t,s=n,u=!1;for(let t=0;t<e.length;t++){if(t){if(f=u?f[o]:f[o]={},s=(a=s[o]).c,0===r&&(1===a.t||2===a.t))return null;if(2===a.t){let e=f.length-1;f=f[e],s=s[e].c}}if(o=e[t],(u=Object.hasOwn(f,o))&&0===(null==(i=s[o])?void 0:i.t)&&(null==(l=s[o])?void 0:l.d))return null;u||("__proto__"===o&&(Object.defineProperty(f,o,{enumerable:!0,configurable:!0,writable:!0}),Object.defineProperty(s,o,{enumerable:!0,configurable:!0,writable:!0})),s[o]={t:t<e.length-1&&2===r?3:r,d:!1,i:0,c:{}})}if(a=s[o],a.t!==r&&(1!==r||3!==a.t))return null;if(2===r&&(a.d||(a.d=!0,f[o]=[]),f[o].push(f={}),a.c[a.i++]=a={t:1,d:!1,i:0,c:{}}),a.d)return null;if(a.d=!0,1===r)f=u?f[o]:f[o]={};else if(0===r&&u)return null;return[o,f,a.c]}function D(e,t){var n;let i=null!=(n=null==t?void 0:t.maxDepth)?n:1e3,l={},a={},f=l,s=a;for(let t=o(e,0);t<e.length;){if("["===e[t]){let n="["===e[++t],i=_(e,t+=+n,"]");if(n){if("]"!==e[i[1]-1])throw new r("expected end of table declaration",{toml:e,ptr:i[1]-1});i[1]++}let o=E(i[0],l,a,n?2:1);if(!o)throw new r("trying to redefine an already defined table or value",{toml:e,ptr:t});s=o[2],f=o[1],t=i[1]}else{let n=_(e,t),l=E(n[0],f,s,0);if(!l)throw new r("trying to redefine an already defined table or value",{toml:e,ptr:t});let o=$(e,n[1],void 0,i);l[1][l[0]]=o[0],t=o[1]}if(t=o(e,t,!0),e[t]&&"\n"!==e[t]&&"\r"!==e[t])throw new r("each key-value declaration must be followed by an end-of-line",{toml:e,ptr:t});t=o(e,t)}return l}let N=/^[a-z0-9-_]+$/i;function A(e){let t=typeof e;if("object"===t){if(Array.isArray(e))return"array";if(e instanceof Date)return"date"}return t}function C(e){for(let t=0;t<e.length;t++)if("object"!==A(e[t]))return!1;return 0!=e.length}function I(e){return JSON.stringify(e).replace(/\x7f/g,"\\u007f")}function z(e,t,n){if(0===n)throw new Error("Could not stringify the object: maximum object depth exceeded");if("number"===t)return isNaN(e)?"nan":e===1/0?"inf":e===-1/0?"-inf":e.toString();if("bigint"===t||"boolean"===t)return e.toString();if("string"===t)return I(e);if("date"===t){if(isNaN(e.getTime()))throw new TypeError("cannot serialize invalid date");return e.toISOString()}return"object"===t?function(e,t){let n=Object.keys(e);if(0===n.length)return"{}";let r="{ ";for(let i=0;i<n.length;i++){let l=n[i];i&&(r+=", "),r+=N.test(l)?l:I(l),r+=" = ",r+=z(e[l],A(e[l]),t-1)}return r+" }"}(e,n):"array"===t?function(e,t){if(0===e.length)return"[]";let n="[ ";for(let r=0;r<e.length;r++){if(r&&(n+=", "),null===e[r]||void 0===e[r])throw new TypeError("arrays cannot contain null or undefined values");n+=z(e[r],A(e[r]),t-1)}return n+" ]"}(e,n):void 0}function Z(e,t,n){if(0===n)throw new Error("Could not stringify the object: maximum object depth exceeded");let r="";for(let i=0;i<e.length;i++)r+=`[[${t}]]\n`,r+=L(e[i],t,n),r+="\n\n";return r}function L(e,t,n){if(0===n)throw new Error("Could not stringify the object: maximum object depth exceeded");let r="",i="",l=Object.keys(e);for(let o=0;o<l.length;o++){let a=l[o];if(null!==e[a]&&void 0!==e[a]){let l=A(e[a]);if("symbol"===l||"function"===l)throw new TypeError(`cannot serialize values of type '${l}'`);let o=N.test(a)?a:I(a);if("array"===l&&C(e[a]))i+=Z(e[a],t?`${t}.${o}`:o,n-1);else if("object"===l){let r=t?`${t}.${o}`:o;i+=`[${r}]\n`,i+=L(e[a],r,n-1),i+="\n\n"}else r+=o,r+=" = ",r+=z(e[a],l,n),r+="\n"}}return`${r}\n${i}`.trim()}function M(e,t){var n;if("object"!==A(e))throw new TypeError("stringify can only be called with an object");return L(e,"",null!=(n=null==t?void 0:t.maxDepth)?n:1e3)}const P={parse:D,stringify:M,TomlDate:g,TomlError:r}}};
//# sourceMappingURL=971.js.map