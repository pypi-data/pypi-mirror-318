<form id="miningForm" class="bg-gray-200 p-6 rounded shadow-md">
    <label for="miner_address" class="block mb-2">Miner Address:</label>
    <input
        type="text"
        id="miner_address"
        name="miner_address"
        class="w-full p-2 mb-4 border rounded"
        placeholder="Enter your wallet address"
        required
    />

    <button
        type="button"
        id="mineButton"
        class="w-full bg-green-500 text-white p-2 rounded hover:bg-green-600"
    >
        Start Mining
    </button>
</form>

<script>
    document.getElementById("mineButton").addEventListener("click", async () => {
        const minerAddress = document.getElementById("miner_address").value;

        try {
            const response = await fetch("/mine-block", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ miner_address: minerAddress }),
            });

            const data = await response.json();

            if (response.ok) {
                document.getElementById("result").classList.remove("hidden");
                document.getElementById("blockOutput").textContent = JSON.stringify(data.block, null, 2);
            } else {
                alert(data.error || "Error during mining");
            }
        } catch (error) {
            alert("Error: " + error.message);
        }
    });
</script>
